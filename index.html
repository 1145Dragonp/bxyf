<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>é˜³æ±Ÿå¸‚é˜³ä¸œåŒºé‡‘æ¡‚å­¦æ ¡ã€Šå¥”å‘è¿œæ–¹ã€‹éŸ³ä¹è¯•å¬</title>
<style>
  *{box-sizing:border-box}
  body{margin:0;padding:40px;background:#fff;color:#222;font-family:Arial,Helvetica,sans-serif}
  h2{margin-top:0}
  .player-card{width:100%;max-width:600px;margin:0 auto 24px auto;border:1px solid #ddd;border-radius:6px;padding:12px 16px;background:#fafafa}
  .player-card.playing{border-color:#005cbe;background:#f0f7ff}
  audio{width:100%;outline:0}
  .title{margin-top:8px;font-size:14px;color:#555}
</style>
</head>
<body>

<h2 align="center">ğŸµ </h2>
<div id="cards"></div>

<script>
(async ()=>{
  const list = await fetch('files.json').then(r=>r.json()).catch(()=>[]);
  if(!list.length){document.body.insertAdjacentHTML('beforeend','<p align="center">åŠ è½½åˆ—è¡¨å¤±è´¥</p>');return;}

  const cardsBox = document.getElementById('cards');
  let currentAudio = null;          // å½“å‰æ­£åœ¨æ”¾çš„ audio å…ƒç´ 
  let currentCard  = null;          // å½“å‰é«˜äº®å¡ç‰‡

  list.forEach((item,i)=>{
    const card = document.createElement('div');
    card.className = 'player-card';
    card.innerHTML = `
      <audio src="${item.file}" controls preload="metadata"></audio>
      <div class="title">${item.desc||''}</div>
    `;

    const audio = card.querySelector('audio');
    audio.addEventListener('play', () => {
      if(currentAudio && currentAudio !== audio){
        currentAudio.pause();          // å…ˆæš‚åœä¸Šä¸€ä¸ª
        currentCard.classList.remove('playing');
      }
      currentAudio = audio;
      currentCard  = card;
      card.classList.add('playing');
    });
    audio.addEventListener('pause', () => card.classList.remove('playing'));
    audio.addEventListener('ended', () => card.classList.remove('playing'));

    cardsBox.appendChild(card);
  });
})();
</script>
</body>
</html>
